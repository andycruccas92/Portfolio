<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Portfolio – Repository Viewer</title>
<meta name="description" content="Landing del portfolio con struttura repo navigabile." />
<style>
  :root{
    --bg:#0b0f14; --card:#111720; --muted:#9aa7b3; --text:#e8eef5; --accent:#7cc2ff; --line:#1c2532;
    --hover:#16202c; --tag:#1a2432; --ok:#59d191; --warn:#f0c36a;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg, #0b0f14 0%, #0d141d 100%);
    color:var(--text); font:14.5px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  }
  a{color:var(--accent); text-decoration:none}
  a:hover{text-decoration:underline}
  header{
    position:sticky; top:0; z-index:5; backdrop-filter:saturate(130%) blur(6px);
    background:rgba(11,15,20,.7); border-bottom:1px solid var(--line);
  }
  .wrap{max-width:1100px; margin:0 auto; padding:20px}
  .topbar{display:flex; gap:14px; align-items:center; flex-wrap:wrap}
  .repo-title{font-weight:700; font-size:20px}
  .badge{font-size:12px; padding:4px 8px; border-radius:999px; background:var(--tag); color:var(--muted); border:1px solid var(--line)}
  .controls{margin-left:auto; display:flex; align-items:center; gap:10px}
  .search{display:flex; align-items:center; gap:8px; background:var(--card); border:1px solid var(--line); border-radius:10px; padding:8px 10px}
  .search input{background:transparent; border:0; outline:none; color:var(--text); min-width:210px}
  .btn{
    background:var(--card); border:1px solid var(--line); color:var(--text);
    padding:8px 10px; border-radius:10px; cursor:pointer
  }
  .btn:hover{background:var(--hover)}
  main{padding: 8px 0 40px}
  .layout{display:grid; grid-template-columns: 320px 1fr; gap:18px}
  @media (max-width: 900px){ .layout{grid-template-columns:1fr} }

  .panel{background:var(--card); border:1px solid var(--line); border-radius:16px; overflow:hidden}
  .panel h3{margin:0; padding:14px 16px; border-bottom:1px solid var(--line); font-size:13px; color:var(--muted); letter-spacing:.3px; text-transform:uppercase}
  .tree{padding:6px 0}
  .node{display:block; padding:8px 14px; border-bottom:1px dashed transparent}
  .node:hover{background:var(--hover)}
  .node .row{display:flex; gap:10px; align-items:center}
  .twist{width:18px; text-align:center; cursor:pointer; user-select:none}
  .icon{width:18px; text-align:center; opacity:.9}
  .name{flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
  .links{display:flex; gap:8px; opacity:.0; transition:opacity .15s}
  .node:hover .links{opacity:1}
  .link-chip{font-size:11px; padding:3px 7px; border-radius:8px; border:1px solid var(--line); background:#0f1620}
  .folder>.row .name{font-weight:600}
  .children{margin-left:24px; border-left:1px dashed var(--line); display:none}
  .folder.open>.children{display:block}
  .empty{padding:14px; color:var(--muted)}
  .readme{padding:16px}
  .readme h2{margin-top:0}
  .code{
    background:#0a0f16; border:1px solid var(--line); border-radius:12px; padding:12px; overflow:auto;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:13px
  }

  .breadcrumb{display:flex; gap:8px; align-items:center; padding:10px 16px; border-bottom:1px solid var(--line)}
  .crumb{color:var(--muted)}
  .crumb a{color:var(--muted)}
  .crumb.sep{opacity:.4}
  .legend{padding:10px 16px; border-bottom:1px solid var(--line); color:var(--muted); display:flex; gap:10px; flex-wrap:wrap}
  .legend .pill{border:1px solid var(--line); border-radius:999px; padding:4px 8px; background:var(--tag)}
  footer{opacity:.7; font-size:12px; padding:20px 0}
</style>
</head>
<body>
<header>
  <div class="wrap topbar">
    <div class="repo-title">Portfolio</div>
    <span id="branch" class="badge">branch: …</span>
    <span id="count" class="badge">… items</span>
    <div class="controls">
      <div class="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="currentColor" stroke-width="2"/></svg>
        <input id="q" placeholder="Cerca file o cartella…" />
      </div>
      <button id="expandAll" class="btn">Espandi</button>
      <button id="collapseAll" class="btn">Comprimi</button>
    </div>
  </div>
</header>

<main class="wrap">
  <div class="layout">
    <section class="panel">
      <h3>Struttura repository</h3>
      <div class="breadcrumb" id="breadcrumb"></div>
      <div class="legend">
        <span class="pill">Cartelle in alto, poi file</span>
        <span class="pill">Click nome = seleziona</span>
        <span class="pill">View = Pages · Raw = sorgente · GitHub = UI</span>
      </div>
      <div id="tree" class="tree"></div>
    </section>

    <section class="panel">
      <h3>Dettagli / Anteprima</h3>
      <div id="details" class="readme">
        <div class="empty">Seleziona un file per vederne i dettagli. Se è <code>README.md</code> in root, lo mostro qui sotto.</div>
        <div id="readme"></div>
      </div>
    </section>
  </div>
  <footer>Generato in tempo reale dalla struttura GitHub della repo <strong>andycruccas92/Portfolio</strong>.</footer>
</main>

<script>
(async () => {
  const OWNER = "andycruccas92";
  const REPO  = "Portfolio";
  const api = (p) => `https://api.github.com${p}`;
  const pagesBase = () => `https://${OWNER}.github.io/${REPO}`;

  const branchEl = document.getElementById('branch');
  const countEl  = document.getElementById('count');
  const treeEl   = document.getElementById('tree');
  const qEl      = document.getElementById('q');
  const breadEl  = document.getElementById('breadcrumb');
  const readmeBox= document.getElementById('readme');

  // 1) Scopri default branch
  const repoInfo = await fetch(api(`/repos/${OWNER}/${REPO}`)).then(r=>r.json());
  const DEFAULT_BRANCH = repoInfo.default_branch || 'main';
  br


